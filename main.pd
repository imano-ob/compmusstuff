#N canvas 386 124 776 482 10;
#X declare -lib windowing;
#X obj 77 66 adc~;
#X obj 134 70 readsf~;
#X obj 78 117 multiplex~;
#X obj 255 37 vradio 15 1 0 8 empty empty empty 0 -8 0 10 -262144 -1
-1 1;
#X text 274 34 32;
#X text 276 49 64;
#X text 274 64 128;
#X text 275 79 256;
#X text 275 94 512;
#X text 275 110 1024;
#X text 275 124 2048;
#X text 278 17 comment;
#X text 277 141 4096;
#X obj 255 169 expr pow(2 \, $f1+5);
#N canvas 0 0 450 300 (subpatch) 0;
#X array finalespectromag 64 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 64 -1 200 140 1;
#X restore 385 41 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array finalformaonda 1 float 3;
#A 0 0;
#X coords 0 1 1 -1 200 140 1;
#X restore 385 199 graph;
#X text 208 291 frequencia midi;
#X obj 21 28 vradio 15 1 0 2 empty empty empty 0 -8 0 10 -262144 -1
-1 1;
#X text 43 26 adc;
#X text 45 41 readsf;
#X msg 195 54 start;
#X floatatom 165 292 5 0 0 0 - - -;
#X obj 60 271 tabwrite~ finalespectromag;
#X obj 62 380 tabwrite~ finalformaonda;
#X msg 165 236 \; finalespectromag resize \$1;
#X msg 151 325 \; finalformaonda resize \$1;
#X floatatom 243 202 5 0 0 0 - - -;
#X obj 237 16 loadbang;
#N canvas 440 266 450 300 trab2 1;
#X obj 72 69 inlet~;
#X obj 126 64 inlet;
#X obj 185 272 outlet;
#X obj 70 272 outlet~;
#X obj 124 272 outlet~;
#X obj 229 273 outlet;
#N canvas 789 336 450 300 espectro 0;
#X obj 58 115 inlet~;
#X obj 58 216 rfft~;
#X obj 161 120 inlet;
#X obj 161 161 block~;
#X obj 51 63 import windowing;
#X obj 57 171 hamming~;
#X obj 59 258 outlet~;
#X obj 113 259 outlet~;
#X connect 0 0 5 0;
#X connect 1 0 6 0;
#X connect 1 1 7 0;
#X connect 2 0 3 0;
#X connect 5 0 1 0;
#X restore 51 101 pd espectro;
#N canvas 489 428 450 300 absol 0;
#X obj 39 77 inlet~;
#X obj 93 77 inlet~;
#X obj 43 126 fexpr~ sqrt($x1^2 + $x2^2);
#X obj 47 192 outlet~;
#X obj 236 75 inlet;
#X obj 236 109 block~;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 3 0;
#X connect 4 0 5 0;
#X restore 32 140 pd absol;
#N canvas 762 412 450 300 ang 0;
#X obj 47 51 inlet~;
#X obj 107 51 inlet~;
#X obj 47 99 fexpr~ (atan2($x2 \, $x1))^2;
#X obj 47 149 outlet~;
#X obj 266 226 block~;
#X obj 304 124 inlet;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 3 0;
#X connect 5 0 4 0;
#X restore 147 142 pd ang;
#N canvas 449 212 885 486 pitchtracker2 1;
#X obj 82 136 fft~;
#X obj 83 211 tabwrite~ espectromagnitude-0-0;
#X obj 136 136 tabwrite~ sinal-0-0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array sinal-0-0 64 float 1;
#A 0 -0.033905 -0.0306702 -0.0276489 -0.0256042 -0.0247192 -0.0245361
-0.0244751 -0.025177 -0.0264282 -0.0276489 -0.0280457 -0.027771 -0.0276794
-0.0271606 -0.0263062 -0.0241089 -0.0219116 -0.0199585 -0.0194092 -0.0203857
-0.0246582 -0.0328674 -0.044342 -0.0552979 -0.0622559 -0.0651245 -0.0660706
-0.068634 -0.0720215 -0.0746155 -0.0764465 -0.078186 -0.0800171 -0.0806274
-0.0804749 -0.0800171 -0.0802917 -0.0802002 -0.0791626 -0.0775757 -0.0761414
-0.0742493 -0.0724487 -0.0732727 -0.0738831 -0.0696411 -0.0628052 -0.0596313
-0.0605164 -0.0613708 -0.0607605 -0.0605469 -0.0618286 -0.0633545 -0.0639648
-0.0640259 -0.0654907 -0.0692749 -0.0724487 -0.0706482 -0.0671997 -0.0661316
-0.0687561 -0.0705566;
#X coords 0 1 63 -1 200 140 1 0 0;
#X restore 998 68 graph;
#N canvas 1 89 450 300 (subpatch) 0;
#X array espectromagnitude-0-0 64 float 1;
#A 0 0.0543966 0.0131783 0.00601877 0.00189497 0.00350866 0.0016729
6.5757e-05 0.00134892 0.000716645 6.55168e-05 0.000817663 0.000595666
0.000324803 0.000747948 0.000624118 0.000598005 0.000316342 0.00045256
0.000416806 0.000316291 0.000335022 0.000324976 0.000311123 0.000307114
0.00031003 0.000301706 0.000289722 0.000290563 0.000265808 0.000284908
0.000276898 0.00027036 0.000255585 0.00027036 0.000276898 0.000284908
0.000265808 0.000290564 0.000289722 0.000301707 0.00031003 0.000307114
0.000311123 0.000324976 0.000335022 0.000316291 0.000416806 0.000452559
0.000316342 0.000598005 0.000624118 0.000747948 0.000324803 0.000595666
0.000817663 6.55166e-05 0.000716645 0.00134892 6.57571e-05 0.0016729
0.00350866 0.00189497 0.00601877 0.0131783;
#X coords 0 1 63 -1 200 140 1 0 0;
#X restore 997 258 graph;
#X obj 82 352 until;
#X obj 82 386 f;
#X obj 128 386 + 1;
#X msg 146 353 0;
#X obj 108 563 tabread espectromagnitude-0-0;
#X obj 162 501 f;
#X obj 234 522 f;
#X obj 108 594 expr max($f1 \, $f2) \; if ($f1>$f2 \, $f3 \, $f4);
#X text 16 385 indice;
#X obj 82 422 t f f f b b;
#X obj 407 561 f;
#X obj 532 562 f;
#X obj 225 387 t f f;
#X floatatom 407 595 10 0 0 0 - - -;
#X floatatom 532 596 10 0 0 0 - - -;
#X obj 272 454 t b b b b;
#X obj 251 81 bng 15 250 50 0 empty empty Plotar_gráficos 17 7 0 16
-262144 -1 -1;
#X floatatom 522 868 10 0 0 0 Frequencia - -;
#X text 161 478 max(temp);
#X text 230 499 indmax(temp);
#X text 403 531 max(final);
#X text 527 534 indmax(final);
#X msg 189 454 0;
#X obj 82 287 t b b b;
#X obj 83 51 inlet~;
#X obj 511 54 inlet;
#X msg 511 223 \; sinal-0-0 resize \$1;
#X obj 522 902 outlet;
#X obj 521 670 tabread espectromagnitude-0-0 $f1;
#X obj 199 669 tabread espectromagnitude-0-0 $f1-1;
#X obj 821 671 tabread espectromagnitude-0-0 $f1+1;
#X obj 250 733 expr ($f1 - 2*$f2 + $f3)/2;
#X obj 271 303 f;
#X obj 400 296 expr ($f1/2)+1;
#X floatatom 81 323 5 0 0 0 - - -;
#X floatatom 500 129 5 0 0 0 - - -;
#X obj 272 422 sel;
#X obj 820 787 f;
#X floatatom 813 836 5 0 0 0 - - -;
#X obj 620 738 expr ($f2 - $f1)/2;
#X obj 512 787 expr $f1 - ($f3/2*$f2);
#X obj 521 839 expr $f1*44100.0/$f2;
#X floatatom 442 820 5 0 0 0 - - -;
#X obj 754 784 t b;
#X obj 428 172 t b b;
#X obj 592 152 block~;
#X obj 83 172 expr~ sqrt($v1*$v1+$v2*$v2)/$f3;
#X text 81 16 Renan Teruo Carneiro - N° USP 6.51416e+06;
#X obj 81 256 bang~;
#X msg 549 181 \; espectromagnitude-0-0 resize \$1;
#X obj 237 50 bang~;
#X connect 0 0 51 0;
#X connect 0 1 51 1;
#X connect 5 0 6 0;
#X connect 6 0 14 0;
#X connect 7 0 17 0;
#X connect 8 0 6 1;
#X connect 9 0 12 0;
#X connect 10 0 12 1;
#X connect 10 0 15 1;
#X connect 11 0 12 3;
#X connect 11 0 16 1;
#X connect 12 0 10 1;
#X connect 12 1 11 1;
#X connect 14 0 7 0;
#X connect 14 1 9 0;
#X connect 14 2 12 2;
#X connect 14 3 10 0;
#X connect 14 4 11 0;
#X connect 15 0 18 0;
#X connect 16 0 19 0;
#X connect 17 0 6 1;
#X connect 17 1 41 0;
#X connect 19 0 33 0;
#X connect 19 0 34 0;
#X connect 19 0 35 0;
#X connect 19 0 45 0;
#X connect 20 0 15 0;
#X connect 20 1 16 0;
#X connect 20 2 10 0;
#X connect 20 3 11 0;
#X connect 21 0 2 0;
#X connect 21 0 1 0;
#X connect 22 0 32 0;
#X connect 27 0 10 1;
#X connect 28 0 37 0;
#X connect 28 1 8 0;
#X connect 28 2 27 0;
#X connect 29 0 0 0;
#X connect 29 0 2 0;
#X connect 30 0 40 0;
#X connect 30 0 50 0;
#X connect 33 0 36 1;
#X connect 34 0 36 0;
#X connect 34 0 44 0;
#X connect 35 0 36 2;
#X connect 35 0 44 1;
#X connect 36 0 45 1;
#X connect 37 0 39 0;
#X connect 38 0 37 1;
#X connect 38 0 41 1;
#X connect 39 0 5 0;
#X connect 40 0 54 0;
#X connect 40 0 31 0;
#X connect 40 0 38 0;
#X connect 40 0 42 1;
#X connect 40 0 49 0;
#X connect 40 0 51 2;
#X connect 41 0 20 0;
#X connect 42 0 43 0;
#X connect 43 0 46 1;
#X connect 44 0 45 2;
#X connect 45 0 47 0;
#X connect 45 0 48 0;
#X connect 46 0 22 0;
#X connect 47 0 46 0;
#X connect 48 0 42 0;
#X connect 49 0 53 0;
#X connect 49 1 21 0;
#X connect 51 0 1 0;
#X connect 53 0 28 0;
#X connect 55 0 21 0;
#X restore 164 99 pd pitchtracker2;
#N canvas 689 451 450 300 formaonda 0;
#X obj 23 63 inlet~;
#X obj 412 110 block~;
#X obj 279 113 expr 3*44100/$f1;
#X obj 279 145 expr if($f1 > 44100 \, 44100 \, $f1);
#X text 69 62 sinal-1002-1002;
#X obj 127 63 inlet~;
#X text 178 61 espectro fase;
#X obj 276 62 inlet;
#X text 323 63 f0;
#X obj 393 24 inlet;
#X text 447 61 N;
#X text 485 147 Numero de amostras a ser exibidas;
#X obj 131 149 expr $f1 * $f2 / 44100;
#X text 275 175 phi #TODO: Ver se é a letra grega certa;
#X text 308 208 t0;
#X obj 130 270 expr 44100*$f1;
#X text 222 239 k0;
#X obj 412 305 phasor~;
#X obj 412 265 expr 44100/$f1;
#X obj 412 360 expr~ $f2+$v1*$f3;
#X obj 411 432 outlet~;
#N canvas 0 0 450 300 (subpatch) 0;
#X array sinal-0 64 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 64 -1 200 140 1 0 0;
#X restore 706 55 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array espectrofase-0 64 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 64 -1 200 140 1;
#X restore 710 254 graph;
#X obj 511 436 outlet;
#X obj 131 210 expr ((3*3.14/2)-$f2)/2*3.14*$f1;
#X obj 8 91 tabwrite~ sinal-0;
#X obj 126 100 tabwrite~ espectrofase-0 \;;
#X obj 131 177 tabread4 espectrofase-0;
#X obj 413 396 tabread4~ sinal-0;
#X msg 512 94 \; espectrofase-0 resize \$1;
#X msg 539 48 \; sinal-0 resize \$1;
#X floatatom 130 243 5 0 0 0 - - -;
#X floatatom 377 209 5 0 0 0 - - -;
#X connect 0 0 25 0;
#X connect 2 0 3 0;
#X connect 3 0 19 2;
#X connect 3 0 23 0;
#X connect 3 0 32 0;
#X connect 5 0 26 0;
#X connect 7 0 2 0;
#X connect 7 0 12 0;
#X connect 7 0 24 0;
#X connect 9 0 1 0;
#X connect 9 0 12 1;
#X connect 9 0 18 0;
#X connect 9 0 29 0;
#X connect 9 0 30 0;
#X connect 12 0 27 0;
#X connect 15 0 19 1;
#X connect 17 0 19 0;
#X connect 18 0 17 0;
#X connect 19 0 28 0;
#X connect 24 0 31 0;
#X connect 27 0 24 1;
#X connect 28 0 20 0;
#X connect 31 0 15 0;
#X restore 99 180 pd formaonda;
#N canvas 802 453 450 300 midi 0;
#X obj 38 50 inlet~;
#X text 81 48 sinal-1028;
#X obj 136 51 inlet;
#X text 174 51 frequencia;
#X obj 251 50 inlet;
#X text 288 49 N;
#X obj 251 84 block~;
#X obj 136 86 ftom;
#X obj 136 126 outlet;
#X obj 39 87 rms~;
#X obj 39 130 moses 0.01;
#X obj 96 171 timer;
#X obj 103 246 print;
#X msg 101 212 Tempo: \$1 \, Frequencia: \$2;
#X obj 96 191 pack;
#X obj 46 165 t b b;
#X connect 0 0 9 0;
#X connect 2 0 7 0;
#X connect 4 0 6 0;
#X connect 7 0 8 0;
#X connect 7 0 14 1;
#X connect 9 0 10 0;
#X connect 10 1 15 0;
#X connect 11 0 14 0;
#X connect 13 0 12 0;
#X connect 14 0 13 0;
#X connect 15 0 11 0;
#X connect 15 1 11 1;
#X restore 219 180 pd midi;
#X connect 0 0 6 0;
#X connect 0 0 9 0;
#X connect 0 0 10 0;
#X connect 0 0 11 0;
#X connect 1 0 6 1;
#X connect 1 0 9 1;
#X connect 1 0 7 2;
#X connect 1 0 8 2;
#X connect 1 0 11 2;
#X connect 1 0 10 3;
#X connect 6 0 7 0;
#X connect 6 0 8 0;
#X connect 6 1 7 1;
#X connect 6 1 8 1;
#X connect 7 0 3 0;
#X connect 8 0 10 1;
#X connect 9 0 10 2;
#X connect 9 0 11 1;
#X connect 10 0 4 0;
#X connect 10 1 5 0;
#X connect 11 0 2 0;
#X restore 95 193 pd trab2;
#X msg 123 11 open sec3.wav;
#X obj 35 169 dac~;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 28 0;
#X connect 2 0 30 0;
#X connect 2 0 30 1;
#X connect 3 0 13 0;
#X connect 13 0 24 0;
#X connect 13 0 26 0;
#X connect 13 0 28 1;
#X connect 17 0 2 0;
#X connect 20 0 1 0;
#X connect 27 0 3 0;
#X connect 28 0 22 0;
#X connect 28 1 23 0;
#X connect 28 2 21 0;
#X connect 28 3 25 0;
#X connect 29 0 1 0;
